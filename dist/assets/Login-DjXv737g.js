import{r as h,a as b,b as p,j as e}from"./main-DpKI8Nrd.js";const w="/api";async function m(t,{method:a="GET",body:r,token:d}={}){const l={"Content-Type":"application/json"};d&&(l.Authorization=`Bearer ${d}`);const o=await fetch(`${w}${t}`,{method:a,headers:l,body:r?JSON.stringify(r):void 0}),n=await o.text();let s;try{s=n?JSON.parse(n):{}}catch{s={raw:n}}if(!o.ok){const c=(s==null?void 0:s.error)||`Request failed (${o.status})`;throw new Error(c)}return s}const y={login:({fullName:t,password:a})=>m("/auth/login",{method:"POST",body:{fullName:t,password:a}}),register:({fullName:t,password:a,is_admin:r})=>m("/auth/register",{method:"POST",body:{fullName:t,password:a,is_admin:r}}),health:()=>m("/health")},N=()=>{const[t,a]=h.useState(""),[r,d]=h.useState(""),[l,o]=h.useState(""),[n,s]=h.useState(!1),c=b(),{saveSession:f}=p(),x=async i=>{i.preventDefault(),o(""),s(!0);try{const u=await y.login({fullName:t,password:r});f(u.user,u.token);const g=localStorage.getItem("frc7598_last_dashboard_route");g&&g.startsWith("/")?c(g):c("/channels")}catch(u){o(u.message||"Login failed")}finally{s(!1)}};return e.jsx("div",{className:"min-h-[60vh] flex items-center justify-center px-4",children:e.jsxs("div",{className:"w-full max-w-md bg-white/10 border border-sca-gold/20 rounded-2xl p-6 shadow-xl",children:[e.jsx("h1",{className:"text-2xl font-semibold mb-1",children:"Member Login"}),e.jsx("p",{className:"text-white/70 mb-6",children:"Use your full name and password"}),l&&e.jsx("div",{className:"mb-4 text-sm text-red-300 bg-red-900/30 border border-red-500/30 rounded p-3",children:l}),e.jsxs("form",{onSubmit:x,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm mb-1",children:"Full Name"}),e.jsx("input",{type:"text",value:t,onChange:i=>a(i.target.value),className:"w-full px-3 py-2 rounded bg-white/5 border border-white/20 focus:outline-none focus:ring-2 focus:ring-sca-gold",placeholder:"Jane Doe",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm mb-1",children:"Password"}),e.jsx("input",{type:"password",value:r,onChange:i=>d(i.target.value),className:"w-full px-3 py-2 rounded bg-white/5 border border-white/20 focus:outline-none focus:ring-2 focus:ring-sca-gold",placeholder:"••••••••",required:!0,minLength:6})]}),e.jsx("button",{type:"submit",disabled:n,className:"w-full py-2.5 rounded-full bg-gradient-to-r from-sca-gold to-sca-gold-light text-sca-purple-dark font-semibold shadow-lg shadow-sca-gold/20 disabled:opacity-70",children:n?"Signing in…":"Sign In"})]})]})})};export{N as default};
